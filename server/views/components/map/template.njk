{% from "moj/components/alert/macro.njk" import mojAlert %}
{% from "components/moj-map/macro.njk" import mojMap %}

<div class="app-map">
  <div class="app-map__error">
    {% for alert in params.alerts %}
      {{ mojAlert(alert) }}
    {% endfor %}
  </div>

  {{ mojMap({
    accessTokenUrl: '/map/token',
    cspNonce: params.cspNonce,
    tileUrl: params.tileUrl,
    geoData: {
      points: params.geoData.points,
      lines: params.geoData.lines
    },
    usesInternalOverlays: params.usesInternalOverlays,
    templateId: params.templateId
  }) }}

  <div class="app-map__sidebar">
    {% if params.sidebarHtml %}
      {{ params.sidebarHtml | safe | trim | indent(2) }}
    {% endif %}
  </div>
</div>
